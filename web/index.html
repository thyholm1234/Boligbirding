<!-- Version: 1.3.29 - 2026-01-05 01.16.21 -->
<!-- ¬© Christian Vemmelund Helligs√∏ -->
<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Boligbirding</title>
  <!-- PWA: manifest + tema -->
  <link rel="manifest" href="/manifest.webmanifest">
  <meta name="theme-color" content="#2b7a78" />
  <!-- (valgfrit) ikon-link til desktop/iOS osv. -->
  <link rel="icon" href="/icons/icon-192.png" sizes="192x192">
  <link rel="stylesheet" href="style.css?v=1.3.29">
</head>
<body>
<main style="max-width:500px;margin:40px auto;padding:1em 1em 1em 1em;background:var(--card-bg);border-radius:16px;box-shadow:var(--card-shadow);display:flex;flex-direction:column;align-items:center;">
  <h1 style="text-align:center;margin-bottom:0.7em;">Mine lister</h1>
  <div id="feed" style="width:100%;max-width:400px;display:flex;flex-direction:column;align-items:center;padding-left: 20px;padding-right: 20px;"></div>
</main>
<script>
  async function hentStats() {
    const res = await fetch('/api/user_scoreboard', { credentials: 'include' });
    const data = await res.json();
    let html = "";

    // Grupper √∏verst
    if (data.grupper && data.grupper.length) {
      for (const g of data.grupper) {
        html += `
          <div class="card obserkode-card" style="margin-bottom:1.5em;padding:1.2em 1em;width:100%;">
            <div style="font-weight:bold;font-size:1.15em;margin-bottom:0.5em;">
              <span style="font-size:1.3em;vertical-align:-0.2em;">üè∑Ô∏è</span> ${g.navn}
            </div>
            <div style="margin-bottom:0.3em;">Alle: <b>${g.alle?.antal_arter ?? '-'}</b> arter, placering <b>${g.alle?.placering ?? '-'}</b></div>
            <div style="margin-bottom:0.3em;">Matrikel: <b>${g.matrikel?.antal_arter ?? '-'}</b> arter, placering <b>${g.matrikel?.placering ?? '-'}</b></div>
            <div style="color:var(--text-muted);font-size:0.98em;">
              Seneste art: <span style="font-weight:500;">${g.alle?.sidste_art ?? '-'}</span> (${g.alle?.sidste_dato ?? '-'})
            </div>
          </div>
        `;
      }
    }

    // Nationalt
    html += `
      <div class="card obserkode-card" style="margin-bottom:1.5em;padding:1.2em 1em;width:100%;">
        <div style="font-weight:bold;font-size:1.15em;margin-bottom:0.5em;">
          <span style="font-size:1.3em;vertical-align:-0.2em;">üá©üá∞</span> Nationalt
        </div>
        <div style="margin-bottom:0.3em;">Alle: <b>${data.national_alle?.antal_arter ?? '-'}</b> arter, placering <b>${data.national_alle?.placering ?? '-'}</b></div>
        <div style="margin-bottom:0.3em;">Matrikel: <b>${data.national_matrikel?.antal_arter ?? '-'}</b> arter, placering <b>${data.national_matrikel?.placering ?? '-'}</b></div>
        <div style="color:var(--text-muted);font-size:0.98em;">
          Seneste art: <span style="font-weight:500;">${data.national_alle?.sidste_art ?? '-'}</span> (${data.national_alle?.sidste_dato ?? '-'})
        </div>
      </div>
    `;

    // Lokalafdeling
    html += `
      <div class="card obserkode-card" style="padding:1.2em 1em;width:100%;">
        <div style="font-weight:bold;font-size:1.15em;margin-bottom:0.5em;">
          <span style="font-size:1.3em;vertical-align:-0.2em;">üè†</span> Lokalafdeling
        </div>
        <div style="margin-bottom:0.3em;">Alle: <b>${data.lokalafdeling_alle?.antal_arter ?? '-'}</b> arter, placering <b>${data.lokalafdeling_alle?.placering ?? '-'}</b></div>
        <div style="margin-bottom:0.3em;">Matrikel: <b>${data.lokalafdeling_matrikel?.antal_arter ?? '-'}</b> arter, placering <b>${data.lokalafdeling_matrikel?.placering ?? '-'}</b></div>
        <div style="color:var(--text-muted);font-size:0.98em;">
          Seneste art: <span style="font-weight:500;">${data.lokalafdeling_alle?.sidste_art ?? '-'}</span> (${data.lokalafdeling_alle?.sidste_dato ?? '-'})
        </div>
      </div>
    `;

    document.getElementById('feed').innerHTML = html;
  }
  hentStats();
</script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js?v=1.3.29"></script>
    <script type="module" src="app.js?v=1.3.29"></script>
    <script>
        // Registr√©r service worker n√•r siden er loadet
        if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
            navigator.serviceWorker.register('/sw.js?v=1.3.29' /*, { scope: '/' } */)
            .then(reg => console.log('Service Worker registreret:', reg.scope))
            .catch(err => console.error('SW registrering fejlede:', err));
        });
        }
    </script>
</body>
</html>